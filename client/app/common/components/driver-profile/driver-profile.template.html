<section class="content-container profile-info">
  <div class="pull-right" ng-if="$ctrl.driver.id">
    <a href="#" alt="Do Not Disturb" class="btn btn-link btn-alert">
      <div class="echo-icon icon-dnd"></div>Do Not Disturb
    </a>
  </div>
  <h1 class="profile-name profile-name_driver">
              <div class="echo-icon icon-driver"></div> 
              <span ng-if="!$ctrl.driver.id">New Driver</span>
              <span ng-if="$ctrl.driver.id">{{$ctrl.driver.getFullName()}}</span>
            </h1>
  <form name="$ctrl.driverProfileForm" novalidate>
    <fieldset class="fieldset">
      <div class="form-group" ng-class="{'has-error': $ctrl.driverProfileForm.firstName.$invalid && $ctrl.driverProfileForm.firstName.$touched}">
        <label>First Name</label>
        <input class="form-control" required ng-model="$ctrl.driver.firstName" name="firstName" placeholder="Driver Name" type="text">
        <span class="help-block" ng-if="$ctrl.driverProfileForm.firstName.$error.required && $ctrl.driverProfileForm.firstName.$touched">First name is required</span>
      </div>
      <div class="form-group">
        <label>Last Name</label>
        <input class="form-control" ng-model="$ctrl.driver.lastName" placeholder="Last Name" type="text">
      </div>
      <div class="form-group">
        <label>Preferred Language</label>
        <div class="select">
          <select class="select" ng-model="$ctrl.driver.language">
            <option ng-repeat="item in $ctrl.languages" ng-value="item.language">{{item.language}}</option>
           </select>
        </div>
        <input ng-if="$ctrl.driver.language === $ctrl.other" class="form-control" ng-model="$ctrl.driver.otherLanguage" placeholder="Language" type="text">
      </div>
    </fieldset>
    <fieldset class="fieldset">
      <legend>Contact Information</legend>
      <div class="form-group" ng-class="{'has-error': $ctrl.driverProfileForm.email.$invalid && $ctrl.driverProfileForm.email.$touched}">
        <label>Email Address</label>
        <input class="form-control" name="email" placeholder="email@email.com" type="email" ng-model="$ctrl.driver.email">
        <span class="help-block" ng-if="$ctrl.driverProfileForm.email.$error.email">Invalid email address</span>
      </div>
      <div class="form-group" ng-class="{'has-error': $ctrl.driverProfileForm.phoneNumber.$invalid && $ctrl.driverProfileForm.phoneNumber.$touched}">
        <label>Phone Number</label>
        <input class="form-control" name="phoneNumber" phone-number-mask placeholder="(555) 432-1234" type="tel" ng-model="$ctrl.driver.phone" required>
        <span class="help-block" ng-if="$ctrl.driverProfileForm.phoneNumber.$error.required && $ctrl.driverProfileForm.phoneNumber.$touched">A phone number is required</span>
        <span class="help-block" ng-if="$ctrl.driverProfileForm.phoneNumber.$error.invalidFormat && $ctrl.driverProfileForm.phoneNumber.$touched">Invalid phone number</span>
      </div>
      <div class="form-group">
        <label>Tractor Number</label>
        <input class="form-control" placeholder="e.g. 432019-900" type="text" ng-model="$ctrl.driver.tractor">
      </div>
      <div class="form-group">
        <div ng-if="$ctrl.showConfirmation" class="confirmation text-center">
          <div>Are you sure you want to remove this user?</div>
          <button class="btn btn-secondary" ng-disabled="$ctrl.showButtonLoading" type="submit" ng-click="$ctrl.toggleConfirmation()">Cancel</button>
          <loading-button button-class="btn-danger" button-text="Delete" click-handler="$ctrl.removeUserHandler()" show-loading="$ctrl.showButtonLoading"></loading-button>
        </div>
        <a href="javascript:void(0)" class="btn btn-link btn-alt" ng-if="$ctrl.driver.id && !$ctrl.showConfirmation" ng-click="$ctrl.toggleConfirmation()">Remove User</a>
        <loading-button ng-if="!$ctrl.showConfirmation" button-text="Save Changes" disable-button="$ctrl.driverProfileForm.$invalid" click-handler="$ctrl.saveDriverHandler()" show-loading="$ctrl.showButtonLoading" class="pull-right"></loading-button>
        <div class="text-center help-block">{{$ctrl.serverError}}</div>
      </div>
    </fieldset>
  </form>
</section>